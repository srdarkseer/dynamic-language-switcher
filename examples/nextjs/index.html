<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Language Switcher - Next.js Example</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: "hsl(var(--border))",
                        input: "hsl(var(--input))",
                        ring: "hsl(var(--ring))",
                        background: "hsl(var(--background))",
                        foreground: "hsl(var(--foreground))",
                        primary: {
                            DEFAULT: "hsl(var(--primary))",
                            foreground: "hsl(var(--primary-foreground))",
                        },
                        secondary: {
                            DEFAULT: "hsl(var(--secondary))",
                            foreground: "hsl(var(--secondary-foreground))",
                        },
                        muted: {
                            DEFAULT: "hsl(var(--muted))",
                            foreground: "hsl(var(--muted-foreground))",
                        },
                        accent: {
                            DEFAULT: "hsl(var(--accent))",
                            foreground: "hsl(var(--accent-foreground))",
                        },
                        popover: {
                            DEFAULT: "hsl(var(--popover))",
                            foreground: "hsl(var(--popover-foreground))",
                        },
                        card: {
                            DEFAULT: "hsl(var(--card))",
                            foreground: "hsl(var(--card-foreground))",
                        },
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 222.2 84% 4.9%;
            --primary: 222.2 47.4% 11.2%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96%;
            --secondary-foreground: 222.2 84% 4.9%;
            --muted: 210 40% 96%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --accent: 210 40% 96%;
            --accent-foreground: 222.2 84% 4.9%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 210 40% 98%;
            --border: 214.3 31.8% 91.4%;
            --input: 214.3 31.8% 91.4%;
            --ring: 222.2 84% 4.9%;
            --radius: 0.5rem;
        }

        .dark {
            --background: 222.2 84% 4.9%;
            --foreground: 210 40% 98%;
            --card: 222.2 84% 4.9%;
            --card-foreground: 210 40% 98%;
            --popover: 222.2 84% 4.9%;
            --popover-foreground: 210 40% 98%;
            --primary: 210 40% 98%;
            --primary-foreground: 222.2 47.4% 11.2%;
            --secondary: 217.2 32.6% 17.5%;
            --secondary-foreground: 210 40% 98%;
            --muted: 217.2 32.6% 17.5%;
            --muted-foreground: 215 20.2% 65.1%;
            --accent: 217.2 32.6% 17.5%;
            --accent-foreground: 210 40% 98%;
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 210 40% 98%;
            --border: 217.2 32.6% 17.5%;
            --input: 217.2 32.6% 17.5%;
            --ring: 212.7 26.8% 83.9%;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800">
    <div class="max-w-4xl mx-auto px-4 py-8">
        <!-- Header -->
        <header class="bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700 mb-8">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <h1 id="page-title" class="text-4xl font-bold text-gray-900 dark:text-white text-center mb-4">
                    Welcome to Next.js with Language Support
                </h1>
                <p id="page-description" class="text-xl text-gray-600 dark:text-gray-300 text-center max-w-3xl mx-auto">
                    This page demonstrates server-side language detection
                </p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <!-- Language Switcher -->
            <section class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-200 dark:border-gray-700 mb-8">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center" id="switcher-title">
                    Switch Language
                </h2>
                <div class="flex justify-center">
                    <div class="relative inline-block">
                        <button id="dropdown-trigger" class="inline-flex items-center justify-center gap-2 px-6 py-3 text-base font-medium text-foreground bg-background border border-input rounded-lg shadow-sm hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2">
                            <span id="current-flag">🇺🇸</span>
                            <span id="current-name">English</span>
                            <svg id="dropdown-arrow" class="ml-2 h-5 w-5 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>
                        
                        <div id="dropdown-menu" class="hidden absolute right-0 mt-2 w-80 origin-top-right rounded-lg bg-popover border border-border shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50 max-h-96 overflow-y-auto">
                            <!-- Language options will be populated here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Language Information -->
            <section class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-200 dark:border-gray-700 mb-8">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center" id="language-info-title">
                    Language Information
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 text-center">
                        <div id="current-language" class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2">
                            EN
                        </div>
                        <div class="text-sm text-gray-600 dark:text-gray-400" id="current-lang-label">
                            Current language: <span id="lang-text">English</span>
                        </div>
                    </div>
                    <div class="bg-green-50 dark:bg-green-900/20 rounded-lg p-6 text-center">
                        <div id="supported-count" class="text-2xl font-bold text-green-600 dark:text-green-400 mb-2">
                            20
                        </div>
                        <div class="text-sm text-gray-600 dark:text-gray-400" id="supported-label">
                            Supported languages: <span id="supported-text">en, es, zh-CN, ar, fr, de, it, pt, ru, ja, ko, zh-TW, he, fa, ur, hi, bn, th, vi, tr, nl</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Server Information -->
            <section class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-200 dark:border-gray-700 mb-8">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center" id="server-info-title">
                    Server Information
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-purple-50 dark:bg-purple-900/20 rounded-lg p-6 text-center">
                        <div id="server-time" class="text-lg font-medium text-purple-600 dark:text-purple-400 mb-2">
                            Current server time: <span id="time-text"></span>
                        </div>
                        <div class="text-sm text-gray-600 dark:text-gray-400" id="server-time-label">
                            Server Time
                        </div>
                    </div>
                    <div class="bg-orange-50 dark:bg-orange-900/20 rounded-lg p-6 text-center">
                        <div id="rendering-method" class="text-lg font-medium text-orange-600 dark:text-orange-400 mb-2">
                            Client-side
                        </div>
                        <div class="text-sm text-gray-600 dark:text-gray-400" id="rendering-label">
                            Rendering Method
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700 mt-20">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="text-center text-gray-600 dark:text-gray-400">
                    <p id="footer-text">Built with Next.js, TypeScript, and Tailwind CSS</p>
                    <p class="mt-2" id="footer-subtext">Dynamic Language Switcher - Server-side Rendering Example</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Comprehensive translations
        const translations = {
            en: {
                pageTitle: 'Welcome to Next.js with Language Support',
                pageDescription: 'This page demonstrates server-side language detection',
                switcherTitle: 'Switch Language',
                languageInfoTitle: 'Language Information',
                currentLanguage: 'Current language: {lang}',
                supportedLanguages: 'Supported languages: {languages}',
                serverInfoTitle: 'Server Information',
                serverTime: 'Current server time: {time}',
                serverTimeLabel: 'Server Time',
                renderingMethod: 'Client-side',
                renderingLabel: 'Rendering Method',
                footerText: 'Built with Next.js, TypeScript, and Tailwind CSS',
                footerSubtext: 'Dynamic Language Switcher - Server-side Rendering Example'
            },
            es: {
                pageTitle: 'Bienvenido a Next.js con Soporte de Idiomas',
                pageDescription: 'Esta página demuestra la detección de idioma del lado del servidor',
                switcherTitle: 'Cambiar Idioma',
                languageInfoTitle: 'Información del Idioma',
                currentLanguage: 'Idioma actual: {lang}',
                supportedLanguages: 'Idiomas soportados: {languages}',
                serverInfoTitle: 'Información del Servidor',
                serverTime: 'Hora actual del servidor: {time}',
                serverTimeLabel: 'Hora del Servidor',
                renderingMethod: 'Lado del Cliente',
                renderingLabel: 'Método de Renderizado',
                footerText: 'Construido con Next.js, TypeScript y Tailwind CSS',
                footerSubtext: 'Cambiador de Idioma Dinámico - Ejemplo de Renderizado del Lado del Servidor'
            },
            'zh-CN': {
                pageTitle: '欢迎使用支持多语言的Next.js',
                pageDescription: '此页面演示服务器端语言检测',
                switcherTitle: '切换语言',
                languageInfoTitle: '语言信息',
                currentLanguage: '当前语言：{lang}',
                supportedLanguages: '支持的语言：{languages}',
                serverInfoTitle: '服务器信息',
                serverTime: '当前服务器时间：{time}',
                serverTimeLabel: '服务器时间',
                renderingMethod: '客户端',
                renderingLabel: '渲染方法',
                footerText: '使用Next.js、TypeScript和Tailwind CSS构建',
                footerSubtext: '动态语言切换器 - 服务器端渲染示例'
            },
            ar: {
                pageTitle: 'مرحباً بك في Next.js مع دعم اللغات',
                pageDescription: 'هذه الصفحة توضح اكتشاف اللغة من جانب الخادم',
                switcherTitle: 'تغيير اللغة',
                languageInfoTitle: 'معلومات اللغة',
                currentLanguage: 'اللغة الحالية: {lang}',
                supportedLanguages: 'اللغات المدعومة: {languages}',
                serverInfoTitle: 'معلومات الخادم',
                serverTime: 'الوقت الحالي للخادم: {time}',
                serverTimeLabel: 'وقت الخادم',
                renderingMethod: 'جانب العميل',
                renderingLabel: 'طريقة العرض',
                footerText: 'مبني بـ Next.js و TypeScript و Tailwind CSS',
                footerSubtext: 'مبدل اللغة الديناميكي - مثال العرض من جانب الخادم'
            },
            fr: {
                pageTitle: 'Bienvenue sur Next.js avec Support Multilingue',
                pageDescription: 'Cette page démontre la détection de langue côté serveur',
                switcherTitle: 'Changer de Langue',
                languageInfoTitle: 'Informations sur la Langue',
                currentLanguage: 'Langue actuelle: {lang}',
                supportedLanguages: 'Langues supportées: {languages}',
                serverInfoTitle: 'Informations du Serveur',
                serverTime: 'Heure actuelle du serveur: {time}',
                serverTimeLabel: 'Heure du Serveur',
                renderingMethod: 'Côté Client',
                renderingLabel: 'Méthode de Rendu',
                footerText: 'Construit avec Next.js, TypeScript et Tailwind CSS',
                footerSubtext: 'Changeur de Langue Dynamique - Exemple de Rendu Côté Serveur'
            },
            de: {
                pageTitle: 'Willkommen bei Next.js mit Sprachunterstützung',
                pageDescription: 'Diese Seite demonstriert serverseitige Spracherkennung',
                switcherTitle: 'Sprache Wechseln',
                languageInfoTitle: 'Sprachinformationen',
                currentLanguage: 'Aktuelle Sprache: {lang}',
                supportedLanguages: 'Unterstützte Sprachen: {languages}',
                serverInfoTitle: 'Serverinformationen',
                serverTime: 'Aktuelle Serverzeit: {time}',
                serverTimeLabel: 'Serverzeit',
                renderingMethod: 'Client-seitig',
                renderingLabel: 'Rendering-Methode',
                footerText: 'Gebaut mit Next.js, TypeScript und Tailwind CSS',
                footerSubtext: 'Dynamischer Sprachumschalter - Serverseitiges Rendering Beispiel'
            }
        };

        // Available languages
        const availableLanguages = [
            { code: 'en', name: 'English', flag: '🇺🇸' },
            { code: 'es', name: 'Español', flag: '🇪🇸' },
            { code: 'fr', name: 'Français', flag: '🇫🇷' },
            { code: 'de', name: 'Deutsch', flag: '🇩🇪' },
            { code: 'it', name: 'Italiano', flag: '🇮🇹' },
            { code: 'pt', name: 'Português', flag: '🇵🇹' },
            { code: 'ru', name: 'Русский', flag: '🇷🇺' },
            { code: 'ja', name: '日本語', flag: '🇯🇵' },
            { code: 'ko', name: '한국어', flag: '🇰🇷' },
            { code: 'zh-CN', name: '简体中文', flag: '🇨🇳' },
            { code: 'zh-TW', name: '繁體中文', flag: '🇹🇼' },
            { code: 'ar', name: 'العربية', flag: '🇸🇦', rtl: true },
            { code: 'he', name: 'עברית', flag: '🇮🇱', rtl: true },
            { code: 'fa', name: 'فارسی', flag: '🇮🇷', rtl: true },
            { code: 'ur', name: 'اردو', flag: '🇵🇰', rtl: true },
            { code: 'hi', name: 'हिन्दी', flag: '🇮🇳' },
            { code: 'bn', name: 'বাংলা', flag: '🇧🇩' },
            { code: 'th', name: 'ไทย', flag: '🇹🇭' },
            { code: 'vi', name: 'Tiếng Việt', flag: '🇻🇳' },
            { code: 'tr', name: 'Türkçe', flag: '🇹🇷' },
            { code: 'nl', name: 'Nederlands', flag: '🇳🇱' }
        ];

        let currentLanguage = 'en';

        function t(key, params = {}) {
            let text = translations[currentLanguage]?.[key] || translations.en[key] || key;
            
            if (params) {
                Object.entries(params).forEach(([param, value]) => {
                    text = text.replace(`{${param}}`, value);
                });
            }
            
            return text;
        }

        function updateLanguage(language) {
            currentLanguage = language;
            
            // Update page content
            document.getElementById('page-title').textContent = t('pageTitle');
            document.getElementById('page-description').textContent = t('pageDescription');
            document.getElementById('switcher-title').textContent = t('switcherTitle');
            document.getElementById('language-info-title').textContent = t('languageInfoTitle');
            document.getElementById('server-info-title').textContent = t('serverInfoTitle');
            document.getElementById('server-time-label').textContent = t('serverTimeLabel');
            document.getElementById('rendering-label').textContent = t('renderingLabel');
            document.getElementById('footer-text').textContent = t('footerText');
            document.getElementById('footer-subtext').textContent = t('footerSubtext');
            
            // Update language-specific content
            const currentLang = availableLanguages.find(lang => lang.code === language);
            document.getElementById('current-language').textContent = language.toUpperCase();
            document.getElementById('lang-text').textContent = currentLang.name;
            document.getElementById('current-lang-label').textContent = t('currentLanguage', { lang: currentLang.name });
            document.getElementById('supported-text').textContent = availableLanguages.map(l => l.code).join(', ');
            document.getElementById('supported-label').textContent = t('supportedLanguages', { languages: availableLanguages.map(l => l.code).join(', ') });
            document.getElementById('server-time').textContent = t('serverTime', { time: new Date().toLocaleString() });
            document.getElementById('rendering-method').textContent = t('renderingMethod');
            
            // Update current language display
            document.getElementById('current-flag').textContent = currentLang.flag;
            document.getElementById('current-name').textContent = currentLang.name;
            
            // Update document direction for RTL languages
            if (currentLang.rtl) {
                document.documentElement.dir = 'rtl';
            } else {
                document.documentElement.dir = 'ltr';
            }
        }

        // Populate dropdown menu
        function populateDropdown() {
            const dropdownMenu = document.getElementById('dropdown-menu');
            dropdownMenu.innerHTML = '';

            availableLanguages.forEach(lang => {
                const button = document.createElement('button');
                button.className = 'block w-full px-4 py-3 text-left text-sm text-popover-foreground hover:bg-accent hover:text-accent-foreground cursor-pointer transition-colors';
                button.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <span class="text-lg">${lang.flag}</span>
                        <div class="flex-1">
                            <div class="font-medium">${lang.name}</div>
                            <div class="text-xs text-muted-foreground">${lang.code}</div>
                        </div>
                        ${lang.rtl ? '<span class="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded">RTL</span>' : ''}
                    </div>
                `;
                button.addEventListener('click', () => {
                    updateLanguage(lang.code);
                    toggleDropdown();
                });
                dropdownMenu.appendChild(button);
            });
        }

        // Toggle dropdown
        function toggleDropdown() {
            const dropdownMenu = document.getElementById('dropdown-menu');
            const dropdownArrow = document.getElementById('dropdown-arrow');
            const isOpen = dropdownMenu.classList.contains('hidden');
            
            if (isOpen) {
                dropdownMenu.classList.remove('hidden');
                dropdownArrow.style.transform = 'rotate(180deg)';
            } else {
                dropdownMenu.classList.add('hidden');
                dropdownArrow.style.transform = 'rotate(0deg)';
            }
        }

        // Add event listeners
        document.getElementById('dropdown-trigger').addEventListener('click', toggleDropdown);

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('dropdown-trigger');
            const dropdownMenu = document.getElementById('dropdown-menu');
            if (!dropdown.contains(e.target) && !dropdownMenu.contains(e.target)) {
                dropdownMenu.classList.add('hidden');
                document.getElementById('dropdown-arrow').style.transform = 'rotate(0deg)';
            }
        });

        // Initialize
        populateDropdown();
        updateLanguage('en');
        document.getElementById('time-text').textContent = new Date().toLocaleString();
    </script>
</body>
</html> 